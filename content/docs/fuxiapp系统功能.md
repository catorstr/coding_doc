# 系统功能模块

## 首页

> 系统第一次启动时会弹出一个窗口提示免责说明，用户必须同意，才能继续使用该系统，第二次启动时就不会弹出了。用户同意后会进入首页，首页分三个部分。
>
> 头部是导航栏，用户可点击"主页"导航到主页，点击"富硒商城"导航到富硒农产品商城，也有一个搜索框，用户可直接在此输入富硒农产品溯源码，点击搜索溯源查看农产品信息，会弹出该溯源码对应商品的溯源信息，还有一个更多标签，用户点击此可选择跳转到登入/注册页面进行对应功能的操作。中间是一个轮播图，用于展示当前系统的热门企业的资讯。剩下的部分是一个商品列表，用户展示当前热售的一些富硒农产品，用户可对商品进行点击购买或查阅更多商品信息，进入购买页面或商品详解页面，主页默认显示的是"热门资讯页面"，这些页面后边会单独解释说明。

## 主页

> 富硒农产品系统主页在首页有一个导航栏可通过点击倒焊栏进入主页，用户登入后会直接跳转主页。主页分为顶部的导航栏和左边的导航栏及功能展示区；顶部的导航栏有首页，企业信息，设置等标签，用户页面切换。点击首页会进入首页，点击企业信息会进入企业个人中心页面，点击设置用户可进行注册、联系开发者、...;左边的盗汗栏主要进行主页功能的跳转，点击不同的标签会在"功能展示区"展示不同的功能页面，自上而下一级导航栏有:主页、链上资产、链工场，商品溯源；二级导航栏"主页"之下有：最新资讯、热门资讯，我的资讯(发布)、资讯发布(编辑)、富硒商城，我的店铺；

### 企业信息

> 点击主页顶部的"企业信息"盗汗栏会跳转到企业个人中心页面，该页面会展示企业的一些基本信息，包括企业/商家名称，头像，电子邮箱，企业/商家地址，也可点击该页面中"编辑"图标对企业/商家信息进行修改操作。点击"编辑"图标会弹出一个对话框，用户可在此修改企业/商家的名称，电子邮箱，地址，头像，营业执照等，

### 链工场

> 点击主页左边导航栏的链上资产标签，系统会根据当前登入用户的系统身份展示对应身份的数据上链存证的功能，在这里可进行富硒农产品进行溯源存证，依据用户身份的不同，要存证的富硒农产品信息也不同，具体分为：
>
> 当用户系统身份为生产商时，需要提供富硒农产品产地、播种时间、收割/采摘时间、富硒含量范围值，富硒农产品实体图片，实景视频，登记人信息，需要注意的是这样的数据上链需要登记者必须诚实可靠或具有权威性，安全体系中人才是最大的漏洞，这种基于人提供的数据在零信任的思想可能不太靠谱，但如何精准的收集富硒农产品信息并进行存证会涉及到非常多的问题，包括硬件软件的结合，数据收集科学。这里假设用户是可信的，即默认用户上传的富硒农产品存证信息是真实的。后期系统的相关溯源功能会与此息息相关。当用户为架构上和第三方销售商时会提供具有细微差别，但存证思想不变的数据上链功能，具体请查阅如下图片：；更多详细的功能待系统演示时再进行详细的说明。

### 链上资产

> 链上资产模块其目的是在溯源的基础上构建应该富硒农产品的电商网站。即富硒农产品溯源系统除了完成农产品的存证与溯源功能外，还增加了电商系统的功能。
>
> 链上资产这个功能只对正式注册了系统身份的用户开放，主要是对链工场中存证的信息进行二次管理，主要为富硒农产品的售卖做铺垫，再这里对数据进行的任何操作并不会改变数据再连上的信息。它是类似与中心化数据库的管理台，但它的增删改查并不会影响数据再长安链上的信息，即便商家在这里删除或修改了数据，消费者依然可以根据他手中的溯源码溯源查询所购买商品的原始存证信息。在这个管理页面，商家可查阅他所有的存证信息列表，并可对其存证后的富硒农产品进行电商功能的操作：包括商品上架售卖、商品编辑、定价、下架等；还可通过溯源码过滤查看单个存证项。

### 商品溯源

> 商品溯源的这个功能其实和首页的溯源搜索框差不多，只不过首页是为了方便消费者而非商家查询溯源富硒农产品，此页是为了方便商家对其其购买的产品进行溯源的。在此系统中商家亦可是消费者。

### 富硒商城

> 此功能对所有人公开，任何使用该系统的人可在此浏览/购买富硒农产品。富硒农产品即富含硒元素的农产品，它是农产品的范畴，所以在这个页面我根据农产品的分类，也同样将富硒农产品分为这类型，包括：水果类，豆类，茶叶类，....;系统默认展示的是水果类的富硒农产品，用户可点击不同的"按钮"，定位其想要购买类型的富硒农产品。系统会依据用户点击的分类不同为其展示不同的富硒农产品类型。具体如图所示：

### 我的商铺

> 商铺的这个功能只对正式注册了系统身份的用户开放，用户在此可查看他在"链上资产"功能中"上架"的商品，添加商品标签，其中本店热售和本店招牌是代码中写死的，用户也可以自定义添加标签，添加完了之后，在"链上资产"页面的商品上架和编辑中可选择其自定义添加的标签为其商品进行分类，分类上架的商品在我的店铺中，可通过点击不同的商品标签，查看不同分类的商品。在我的店铺中除了可查阅自己上架的商品外，还可查看和管理以售出的商品，对其进行"发货"操作，点击发货时，会弹出一个对话框，需要登记商品的物流信息，该信息会被保存到长安链上，供消费者溯源查看。
>
> 在此页面还可查看商家自己的"购物车"，购物车同其他电商系统一样，可对商家进行查看和购买；还可查看商家购买的商品列表，点击每个商品项可查看其对应的第三方物流信息。

### 商家店铺

> 商家店铺的这个功能对所有使用该系统的人开放，入口是在商品详情页用户点击商家头像或是商家名称时进入，展示的内容大体情况和"我的店铺"差不多，不同的是在商品项中多了点击加入购物车和立即购买的功能。

### TxId详情

> 区块链上的每一笔交易都会产生一个一个交易TxId，通过TxId可以查看本次交易的详细信息，包括：交易时的区块高度、交易参数、所属组织、合约名、合约方法、交易时间戳等等，在"链工场"每次存证交易中，我都会保存交易产生的TxId到中心化数据库mysql中，供后期用户通过TxId查看他所购买的商品是否真正是在区块链上，即在系统中TxId详情用于证明商品是否在链上存有它的信息，TxId会查到交易的参数及区块高度等这些信息，但它并不能直接看到交易参数的明文信息，看到的参数信息只是经过长安链内部的加密算法加密后转base64的字符串。

### 溯源详情

> 溯源详情页是真正可以通过富硒农产品溯源系统产生的溯源码查阅到农产品原始上链信息的数据，系统中的溯源码，除了其创建者或购买商品者购买商品后才可知道溯源码。系统通过此溯源码关联富硒农产品区块上个单独的交易,单独交易包括：生产商的存证，运输信息的存证，加工商的存证，他们之间关联逻辑及与消费者的之间的关系在前边的章节中已经作出了详细的介绍。

### 商品详情

> 商品详解是在"链工场"在信息存证之后，我保存在中心化数据库中的副本信息，包括：存储在web3.storage上的农产品图片、视频的cid地址(类似与url地址)，交易TxId、溯源码及额外增加的商品标题，商品描述、商品价格等信息，在商品详情页。除了溯源码以外，用户可以查看到这些信息。另还有商家的头像、商品名称可通过点击这两个跳转到商家的店铺中、也可点击TxId查阅该商品在长安链上的交易信息。

### 商品物流详解

> 此处会更具第三方的物流编号，查阅第三方的物流接口以获取商品的物流信息，查阅到的物流信息会显示在该页面，如下图所示：

### 资讯模块

> 资讯模块是我对富硒农产品溯源系统加的附加功能，包括资讯的发布、最新资讯、热门资讯、我的资讯及资讯详细，这些附加功能其目的是在富硒农产品溯源系统内部建立一个良好的信息交流社区，系统中的用户可在此查阅和发布自己的商品购买需求或与富硒农产品相关的资讯内容。依此而衍生出各种小的功能模块有资讯发布的编辑、资讯预览、资讯点赞、资讯评论(只有一级评论、多级评论功能有时间了在写了)。这些功能具体如下图所示：

## 数据库设计

> 富硒农产品溯源系统虽然是基于区块链构建的，但因为添加了电商功能，基于电商的一些数据不可能全部保存到区块链中，也没必要将这些数据存储到区块链中，富硒农产品溯源系统会涉及到"用户表"、"商品表"、"标签表"、"物流表"、"订单表"等。这些表的主要作用如下：
>
> 用户表：将会完成用户登入/注册SRP协议所需保存的信息及一些其他数据，具体字段代码如下：
>
> 商品表：基于富硒农产品原始数据上链后的一些数据，和商品的一些基本信息，具体字段代码如下：
>
> 标签标：标签表是商品的的附加表，其目的是方便商品的类型检索，具体字段代码如下：
>
> 物流表：保存富硒农产品商品第三方运输编号与商品关联的信息。具体字段代码如下：
>
> 订单表：其作用是保证用户在系统上购买富硒农产品时，其是否支付了钱及商品状态的转换，去具体字段代码如下：

## 更多

>  以上系统的介绍还不够全面或介绍的不够好，更多系统内容和系统介绍还在完善中...
